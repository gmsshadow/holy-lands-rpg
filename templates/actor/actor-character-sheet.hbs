<form class="{{cssClass}} flexcol" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
    <div class="header-fields">
      <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Character Name"/></h1>
      <div class="resource">
        <div class="resource-group">
          <label>Life</label>
          <input type="text" name="system.life.value" value="{{system.life.value}}" data-dtype="Number" placeholder="0"/>
          <span> / </span>
          <input type="text" name="system.life.max" value="{{system.life.max}}" data-dtype="Number" placeholder="10"/>
        </div>
        <div class="resource-group">
          <label>Faith</label>
          <input type="text" name="system.faith.value" value="{{system.faith.value}}" data-dtype="Number" placeholder="0"/>
          <span> / </span>
          <input type="text" name="system.faith.max" value="{{system.faith.max}}" data-dtype="Number" placeholder="5"/>
        </div>
      </div>
      <div class="character-info">
        <div class="info-group">
          <label>Class</label>
          <select name="system.class" data-dtype="String">
            {{#select system.class}}
            {{#each classes as |name key|}}
              <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
          </select>
        </div>
        <div class="info-group">
          <label>Stature</label>
          <select name="system.stature" data-dtype="String">
            {{#select system.stature}}
            {{#each statures as |name key|}}
              <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
          </select>
        </div>
        <div class="info-group">
          <label>Level</label>
          <input type="text" name="system.level" value="{{system.level}}" data-dtype="Number"/>
        </div>
        <div class="info-group">
          <label>XP</label>
          <input type="text" name="system.experience" value="{{system.experience}}" data-dtype="Number"/>
        </div>
      </div>
      <div class="character-details">
        <div class="detail-group">
          <label>Age</label>
          <input type="text" name="system.age" value="{{system.age}}" data-dtype="Number"/>
        </div>
        <div class="detail-group">
          <label>Gender</label>
          <input type="text" name="system.gender" value="{{system.gender}}"/>
        </div>
      </div>
    </div>
  </header>

  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="attributes">Attributes</a>
    <a class="item" data-tab="skills">Skills</a>
    <a class="item" data-tab="combat">Combat</a>
    <a class="item" data-tab="equipment">Equipment</a>
    <a class="item" data-tab="miracles">Miracles</a>
    <a class="item" data-tab="biography">Biography</a>
  </nav>

  <section class="sheet-body">
    <div class="tab attributes" data-group="primary" data-tab="attributes">
      <h3>Attributes</h3>
      <div class="attributes-grid">
        {{#each system.attributes as |attr key|}}
        <div class="attribute">
          <label>{{attr.label}}</label>
          <input type="text" name="system.attributes.{{key}}.value" value="{{attr.value}}" data-dtype="Number"/>
          <button class="attribute-roll" data-attribute="{{key}}">
            <i class="fas fa-dice-d12"></i> Roll
          </button>
        </div>
        {{/each}}
      </div>

      <h3>Abilities</h3>
      <div class="abilities-grid">
        {{#each system.abilities as |ability key|}}
        <div class="ability">
          <label>{{ability.label}}</label>
          <div class="ability-values">
            <span class="pf">PF: {{ability.mod}}</span>
            <input type="text" name="system.abilities.{{key}}.bonus" value="{{ability.bonus}}" data-dtype="Number" placeholder="0" title="Bonus"/>
          </div>
          <button class="ability-roll" data-ability="{{key}}">
            <i class="fas fa-dice-d20"></i> Roll
          </button>
        </div>
        {{/each}}
      </div>

      <h3>Saving Throws</h3>
      <div class="saves-grid">
        {{#each system.saves as |save key|}}
        <div class="save">
          <label>{{save.label}}</label>
          <input type="text" name="system.saves.{{key}}.value" value="{{save.value}}" data-dtype="Number" placeholder="0"/>
          <button class="save-roll" data-save="{{key}}">
            <i class="fas fa-dice-d20"></i> Roll
          </button>
        </div>
        {{/each}}
      </div>
    </div>

    <div class="tab skills" data-group="primary" data-tab="skills">
      <h3>Gifts (Strongest Skills)</h3>
      <div class="skills-list">
        {{#each system.skills.gifts as |skill key|}}
        <div class="skill">
          <input type="text" name="system.skills.gifts.{{key}}.name" value="{{skill.name}}" placeholder="Skill Name"/>
          <input type="text" name="system.skills.gifts.{{key}}.value" value="{{skill.value}}" data-dtype="Number" placeholder="0" title="Base Value"/>
          <input type="text" name="system.skills.gifts.{{key}}.bonus" value="{{skill.bonus}}" data-dtype="Number" placeholder="0" title="Bonus"/>
          <span class="skill-total">Total: {{skill.mod}}</span>
          <button class="skill-roll" data-skill="gifts.{{key}}">
            <i class="fas fa-dice-d20"></i>
          </button>
        </div>
        {{/each}}
      </div>

      <h3>Talents (Medium Skills)</h3>
      <div class="skills-list">
        {{#each system.skills.talents as |skill key|}}
        <div class="skill">
          <input type="text" name="system.skills.talents.{{key}}.name" value="{{skill.name}}" placeholder="Skill Name"/>
          <input type="text" name="system.skills.talents.{{key}}.value" value="{{skill.value}}" data-dtype="Number" placeholder="0" title="Base Value"/>
          <input type="text" name="system.skills.talents.{{key}}.bonus" value="{{skill.bonus}}" data-dtype="Number" placeholder="0" title="Bonus"/>
          <span class="skill-total">Total: {{skill.mod}}</span>
          <button class="skill-roll" data-skill="talents.{{key}}">
            <i class="fas fa-dice-d20"></i>
          </button>
        </div>
        {{/each}}
      </div>

      <h3>Crafts (Learning Skills)</h3>
      <div class="skills-list">
        {{#each system.skills.crafts as |skill key|}}
        <div class="skill">
          <input type="text" name="system.skills.crafts.{{key}}.name" value="{{skill.name}}" placeholder="Skill Name"/>
          <input type="text" name="system.skills.crafts.{{key}}.value" value="{{skill.value}}" data-dtype="Number" placeholder="0" title="Base Value"/>
          <input type="text" name="system.skills.crafts.{{key}}.bonus" value="{{skill.bonus}}" data-dtype="Number" placeholder="0" title="Bonus"/>
          <span class="skill-total">Total: {{skill.mod}}</span>
          <button class="skill-roll" data-skill="crafts.{{key}}">
            <i class="fas fa-dice-d20"></i>
          </button>
        </div>
        {{/each}}
      </div>
    </div>

    <div class="tab combat" data-group="primary" data-tab="combat">
      <h3>Combat Stats</h3>
      <div class="combat-stats">
        <div class="stat">
          <label>Initiative</label>
          <input type="text" name="system.combat.initiative" value="{{system.combat.initiative}}" data-dtype="Number"/>
        </div>
        <div class="stat">
          <label>Defense</label>
          <input type="text" name="system.combat.defense" value="{{system.combat.defense}}" data-dtype="Number"/>
        </div>
        <div class="stat">
          <label>Armor Rating</label>
          <input type="text" name="system.combat.armorRating" value="{{system.combat.armorRating}}" data-dtype="Number"/>
        </div>
      </div>

      <h3>Weapon Skills</h3>
      {{#each system.weaponSkills as |ws key|}}
      <div class="weapon-skill">
        <h4>{{ws.label}}</h4>
        <div class="ws-stats">
          <div class="ws-stat">
            <label>Attack</label>
            <input type="text" name="system.weaponSkills.{{key}}.attack" value="{{ws.attack}}" data-dtype="Number"/>
          </div>
          {{#if ws.parry}}
          <div class="ws-stat">
            <label>Parry</label>
            <input type="text" name="system.weaponSkills.{{key}}.parry" value="{{ws.parry}}" data-dtype="Number"/>
          </div>
          {{/if}}
          <div class="ws-stat">
            <label>Critical</label>
            <input type="text" name="system.weaponSkills.{{key}}.critical" value="{{ws.critical}}" data-dtype="Number"/>
          </div>
          <div class="ws-stat">
            <label>Special</label>
            <input type="text" name="system.weaponSkills.{{key}}.special" value="{{ws.special}}" data-dtype="Number"/>
          </div>
        </div>
      </div>
      {{/each}}
    </div>

    <div class="tab equipment" data-group="primary" data-tab="equipment">
      <h3>Currency</h3>
      <div class="currency">
        <div class="currency-item">
          <label>Gold</label>
          <input type="text" name="system.currency.gold" value="{{system.currency.gold}}" data-dtype="Number"/>
        </div>
        <div class="currency-item">
          <label>Silver</label>
          <input type="text" name="system.currency.silver" value="{{system.currency.silver}}" data-dtype="Number"/>
        </div>
      </div>

      <h3>Weapons</h3>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-name">Name</div>
          <div class="item-controls">
            <a class="item-control item-create" data-type="weapon" title="Create Weapon">
              <i class="fas fa-plus"></i>
            </a>
          </div>
        </li>
        {{#each weapons as |item id|}}
        <li class="item flexrow" data-item-id="{{item._id}}">
          <div class="item-name">
            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
            <h4>{{item.name}}</h4>
          </div>
          <div class="item-props">{{item.system.damage}}</div>
          <div class="item-controls">
            <a class="item-control attack-roll" title="Roll Attack"><i class="fas fa-dice-d20"></i></a>
            <a class="item-control damage-roll" title="Roll Damage"><i class="fas fa-dice"></i></a>
            <a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>

      <h3>Armor</h3>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-name">Name</div>
          <div class="item-controls">
            <a class="item-control item-create" data-type="armor" title="Create Armor">
              <i class="fas fa-plus"></i>
            </a>
          </div>
        </li>
        {{#each armor as |item id|}}
        <li class="item flexrow" data-item-id="{{item._id}}">
          <div class="item-name">
            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
            <h4>{{item.name}}</h4>
          </div>
          <div class="item-props">AR: {{item.system.armorRating}}</div>
          <div class="item-controls">
            <a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>

      <h3>Equipment</h3>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-name">Name</div>
          <div class="item-controls">
            <a class="item-control item-create" data-type="equipment" title="Create Equipment">
              <i class="fas fa-plus"></i>
            </a>
          </div>
        </li>
        {{#each equipment as |item id|}}
        <li class="item flexrow" data-item-id="{{item._id}}">
          <div class="item-name">
            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
            <h4>{{item.name}}</h4>
          </div>
          <div class="item-props">Qty: {{item.system.quantity}}</div>
          <div class="item-controls">
            <a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>
    </div>

    <div class="tab miracles" data-group="primary" data-tab="miracles">
      <h3>Miracles</h3>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-name">Name</div>
          <div class="item-controls">
            <a class="item-control item-create" data-type="miracle" title="Create Miracle">
              <i class="fas fa-plus"></i>
            </a>
          </div>
        </li>
        {{#each miracles as |item id|}}
        <li class="item flexrow" data-item-id="{{item._id}}">
          <div class="item-name">
            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
            <h4>{{item.name}}</h4>
          </div>
          <div class="item-props">FC: {{item.system.faithCost}}</div>
          <div class="item-controls">
            <a class="item-control miracle-cast" title="Cast Miracle"><i class="fas fa-hands-praying"></i></a>
            <a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>

      <h3>Blessings</h3>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-name">Name</div>
          <div class="item-controls">
            <a class="item-control item-create" data-type="blessing" title="Create Blessing">
              <i class="fas fa-plus"></i>
            </a>
          </div>
        </li>
        {{#each blessings as |item id|}}
        <li class="item flexrow" data-item-id="{{item._id}}">
          <div class="item-name">
            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
            <h4>{{item.name}}</h4>
          </div>
          <div class="item-controls">
            <a class="item-control blessing-use" title="Use Blessing"><i class="fas fa-cross"></i></a>
            <a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>
    </div>

    <div class="tab biography" data-group="primary" data-tab="biography">
      <div class="editor-content">
        {{editor system.biography target="system.biography" button=true owner=owner editable=editable}}
      </div>
    </div>
  </section>
</form>
